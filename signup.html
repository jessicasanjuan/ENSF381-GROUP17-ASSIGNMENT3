<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-witdth, initial-scale=1.0">
        <title>Login - LMS</title>
        <link rel="stylesheet" href="styles.css">
        <script>
            function validateForm(event)
            {
                event.preventDefault();
                let username = document.getElementById("username").value;
                let password = document.getElementById("password").value;
                let confirmPassword = document.getElementById("confirm").value;
                let email = document.getElementById("email").value;
                let messageBox = document.getElementById("message-box");
                messageBox.innerHTML = "";

                //regex patterns
                let usernamePattern = /^[a-zA-Z][a-zA-Z0-9_-]{2,19}$/;
                let passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_\-=+\[\]{};:'",.<>?/`~]).{8,}$/;
                let emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.(com|net|io)$/;

                // handle all the errors to be listed in the message box
                let errors = [];

                if (!usernamePattern.test(username)) 
                {
                    errors.push("<p>Invalid username: Must be 3-20 characters, start with a letter, and can contain letters, numbers, hyphens, and underscores.</p>");
                }
                if (!passwordPattern.test(password)) 
                {
                    errors.push("<p>Invalid password: Must be at least 8 characters, with one uppercase letter, one lowercase letter, one number, and one special character.</p>");
                }
                if (password !== confirmPassword) 
                {
                    errors.push("<p>Passwords do not match.</p>");
                }
                if (!emailPattern.test(email)) 
                {
                    errors.push("<p>Invalid email format. Must be a valid email ending in .com, .net, or .io.</p>");
                }

                if (errors.length > 0) 
                {
                    messageBox.innerHTML = errors.join("");
                } 
                else 
                {
                    messageBox.innerHTML = "<p>Signup successful! Redirecting to login...</p>";
                    setTimeout(() => {
                        window.location.href = "login.html";
                    }, 2000);
                }
            }
        </script>
    </head>
    <body>
        <header>
            <img src="logo.jpg" width="100px" height="100px"></img>
            <h1>LMS - Learning Management System</h1>           
        </header>
        <div class="menu">
            <a href="index.html" class="menu-link">Homepage</a>
        </div>

        <main id="signup-main">
            <br>
            <br>
            <h2>Sign Up</h2>
            <form onsubmit="validateForm(event)">
                <div id="signup-form">
                    <label for="username">Username:</label> 
                    <br>
                    <input type="text" id="username" class="inputfield"> 
                    <br> <br>
                    <label for="password">Password:</label>
                    <br>
                    <input type="password" id="password" class="inputfield">
                    <br> <br>
                    <label for="confirm">Confirm Password:</label>
                    <br>
                    <input type="password" id="confirm" class="inputfield">
                    <br> <br>
                    <label for="email">Email:</label>
                    <br>
                    <input type="text" id="email" class="inputfield">
                </div>
                <br><br>
                <button type="submit" id="signup-button">Sign Up</button>
                <br><br>
            </form>

            <div id="message-box"></div>

            <a href="login.html">Already have an account? Login here</a>
            <br> <br> <br>
        </main>

        <footer>
            &copy; 2025 LMS. All rights reserved.
        </footer>
    </body>
</html>